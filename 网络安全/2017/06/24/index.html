<!doctype html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  
  
    
  
  <link href="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.min.css" rel="stylesheet" type="text/css" />




  
  
  
  

  
    
    
  

  

  

  

  

  
    
    
    <link href="//fonts.googleapis.com/css?family=Lato:300,300italic,400,400italic,700,700italic&subset=latin,latin-ext" rel="stylesheet" type="text/css">
  






  

<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.6.2/css/font-awesome.min.css" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=5.1.0" rel="stylesheet" type="text/css" />


  <meta name="keywords" content="Hexo, NexT" />








  <link rel="shortcut icon" type="image/x-icon" href="/assets/img/favicon.png?v=5.1.0" />






<meta name="description" content="网络安全网络通信安全问题A与B通过互联网中的两台主机建立通信.这两台从未建立过连接的主机之间通信,存在哪些问题?

机密性:网络协议只支持明文传输数据
完整性:数据可能在传输途中被修改
身份认证:银行等系统需要明确双方身份

加密为确保网络中所传输数据的机密性,加密成了必要的解决方式.同时加密后的数据还需要无差别的解密回原来的文本.
其中加密通过加密算法实现.加密算法可以在网络中公开,但是密钥必须">
<meta property="og:type" content="article">
<meta property="og:title" content="网络安全">
<meta property="og:url" content="http://xpercent.tech/网络安全/2017/06/24/index.html">
<meta property="og:site_name" content="Xpercent">
<meta property="og:description" content="网络安全网络通信安全问题A与B通过互联网中的两台主机建立通信.这两台从未建立过连接的主机之间通信,存在哪些问题?

机密性:网络协议只支持明文传输数据
完整性:数据可能在传输途中被修改
身份认证:银行等系统需要明确双方身份

加密为确保网络中所传输数据的机密性,加密成了必要的解决方式.同时加密后的数据还需要无差别的解密回原来的文本.
其中加密通过加密算法实现.加密算法可以在网络中公开,但是密钥必须">
<meta property="og:image" content="http://xpercent.tech/assets/blogImg/数字签名过程.png">
<meta property="og:image" content="http://xpercent.tech/assets/blogImg/数字证书认证过程.png">
<meta property="og:updated_time" content="2017-06-25T12:05:57.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="网络安全">
<meta name="twitter:description" content="网络安全网络通信安全问题A与B通过互联网中的两台主机建立通信.这两台从未建立过连接的主机之间通信,存在哪些问题?

机密性:网络协议只支持明文传输数据
完整性:数据可能在传输途中被修改
身份认证:银行等系统需要明确双方身份

加密为确保网络中所传输数据的机密性,加密成了必要的解决方式.同时加密后的数据还需要无差别的解密回原来的文本.
其中加密通过加密算法实现.加密算法可以在网络中公开,但是密钥必须">
<meta name="twitter:image" content="http://xpercent.tech/assets/blogImg/数字签名过程.png">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    sidebar: {"position":"right","display":"post"},
    fancybox: true,
    motion: true,
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="http://xpercent.tech/网络安全/2017/06/24/"/>





  <title> 网络安全 | Xpercent </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  



  <script type="text/javascript">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?f3d09cc878110b3e09e5ef2a0648a21c";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>








  
  
    
  

  <div class="container one-collumn sidebar-position-right page-post-detail ">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Xpercent</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">发现，探索，专注</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br />
            
            标签
          </a>
        </li>
      

      
    </ul>
  

  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">
  <link itemprop="mainEntityOfPage" href="http://xpercent.tech/网络安全/2017/06/24/">

  <span style="display:none" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <meta itemprop="name" content="Xpercent">
    <meta itemprop="description" content="">
    <meta itemprop="image" content="/assets/blogImg/avatar.png">
  </span>

  <span style="display:none" itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
    <meta itemprop="name" content="Xpercent">
    <span style="display:none" itemprop="logo" itemscope itemtype="http://schema.org/ImageObject">
      <img style="display:none;" itemprop="url image" alt="Xpercent" src="">
    </span>
  </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                网络安全
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>
              <time title="Post created" itemprop="dateCreated datePublished" datetime="2017-06-24T23:08:34+08:00">
                2017-06-24
              </time>
            

            

            
          </span>

          
            <span class="post-category" >
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/网络安全/" itemprop="url" rel="index">
                    <span itemprop="name">网络安全</span>
                  </a>
                </span>

                
                
              
            </span>
          

          
            
              <span class="post-comments-count">
                <span class="post-meta-divider">|</span>
                <a href="/网络安全/2017/06/24/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="网络安全/2017/06/24/" itemprop="commentCount"></span>
                </a>
              </span>
            
          

          

          
          

          
            <span class="post-meta-divider">|</span>
            <span class="page-pv">本文总阅读量
            <span class="busuanzi-value" id="busuanzi_value_page_pv" ></span>次
            </span>
          

          

        </div>
      </header>
    


    <div class="post-body" itemprop="articleBody">

      
      

      
        <link rel="stylesheet" type="text/css" href="/assets/css/DPlayer.min.css"><script src="/assets/js/DPlayer.min.js"> </script><script src="/assets/js/APlayer.min.js"> </script><h3 id="网络安全"><a href="#网络安全" class="headerlink" title="网络安全"></a>网络安全</h3><h4 id="网络通信安全问题"><a href="#网络通信安全问题" class="headerlink" title="网络通信安全问题"></a>网络通信安全问题</h4><p>A与B通过互联网中的两台主机建立通信.这两台从未建立过连接的主机之间通信,存在哪些问题?</p>
<ul>
<li>机密性:网络协议只支持明文传输数据</li>
<li>完整性:数据可能在传输途中被修改</li>
<li>身份认证:银行等系统需要明确双方身份</li>
</ul>
<h4 id="加密"><a href="#加密" class="headerlink" title="加密"></a>加密</h4><p>为确保网络中所传输数据的机密性,加密成了必要的解决方式.同时加密后的数据还需要无差别的解密回原来的文本.</p>
<p>其中加密通过加密算法实现.加密算法可以在网络中公开,但是密钥必须保密.因为算法比较难实现,是复杂的数学原理抽象出来的一类问题的解决方法,无疑保证算法的绝对私有是不尽可能的.</p>
<a id="more"></a>
<blockquote>
<p>对称加密</p>
</blockquote>
<p>这种加密方式的数据安全依赖密钥,加密算法完全公开.即每一次通信使用的算法相同,密钥不尽相同.这在小范围通信中是可行的,但是这种加密方式依然存在一些问题.比如:</p>
<p>主机A与B通信,默认使用一种叫md5的加密算法.每次通信时A用string对明文加密,B用string对接收密文进行解密.</p>
<p>一天之中A事实上要与上百甚至上千的主机通信,如果每次都用同一个密钥加密与解密,这种加密似乎变得没什么意义,密钥也变得有些人尽皆知了.</p>
<p>这种情况下,要保证每次同一种算法的数据安全,A不得不针对不同的主机使用不同的密钥.显然这又让事情变得复杂了,互联网中主机浩如烟海,保存和管理这么多的密钥似乎也有些不可理喻了. </p>
<p>这种方式能解决数据机密性问题,但无法保证密钥的有效管理.</p>
<p><strong>常用算法</strong></p>
<ul>
<li>DES: 56位密钥长度, 2000年被暴力破解</li>
<li>3DES TRIPPLE DES:, 3次DES加密</li>
<li>AES: 高级加密标准,128位密钥<ul>
<li>AES192,AES256,AES512.</li>
</ul>
</li>
<li>blowfish</li>
</ul>
<blockquote>
<p>单向加密</p>
</blockquote>
<p>提取数据特征码(也叫消息摘要digest),从而保证数据完整性.特点</p>
<ul>
<li>输入相同,输出必然相同.</li>
<li>雪崩效应: 输入的微小变化, 引起结果的巨大差异</li>
<li>定长输出: 无论原始数据多长,结果的长度都是相同的</li>
<li>不可逆: 无法根据特征码,还原回原来的数据</li>
</ul>
<p>主机A与B通信,不对数据进行加密,但是会将这段数据提取出一段特征码,附加在明文之后在网络中传输.B在接收到数据后,通过算法计算明文的特征码,然后比较两端的特征码.如果特征码相同,则可以保证数据完整性.</p>
<p>这种加密方式存在问题这样一些问题</p>
<ul>
<li>中间人攻击(man-in-middle):  中间人拿到明文后,修改明文,自己用相同算法计算特征码,之后发送出去.</li>
<li>特征码在传输过程中由于电气性问题导致传输到目标主机后不正确</li>
<li>明文被修改了,最终接收方的数据也不正确</li>
</ul>
<p>因此单向加密只能解决<strong>数据完整性</strong>问题,却无法保证数据的机密性,同时还存在中间人攻击的问题.而要解决中间人攻击这种问题,这个过程中的特征码也需要加密后传输.</p>
<p>但是两台主机如何约定密钥呢?如果要网络中传输,密钥也就不再机密了.但是双方还是要交换密钥,这需要网络协议支持,最早的协议叫Diff-hellman算法.这种交换有一个名称中Internet Key Exchange,即IKE.</p>
<p><strong>常用的算法</strong></p>
<ul>
<li>MD4</li>
<li>MD5</li>
<li>SHA1</li>
<li>SHA192,SHA256,SHA384: 这里的长度指的是输出</li>
<li>CRC-32: 循环冗余算法(这只是用来校验的,不提供安全性)</li>
</ul>
<blockquote>
<p>Diff-hellman算法</p>
</blockquote>
<p>A与B通信,A与B在网络中传输两个大素数g,p</p>
<p>A自己随机生成一个数:x<br>B自己随机生成一个数:y</p>
<p>A在本机计算: (g^x)%p,并传输给B<br>B在本机计算: (g^y)%p,并会输给A</p>
<p>A最终得到: x, (g^y)%p<br>B最终得到: y, (g^x)%p</p>
<p>A在本地计算得到密钥: (g^xy)%p<br>B在本地计算得到密钥: (g^yx)%p</p>
<p>从而保证了密钥交换的安全,同时也让用户从繁杂的密码管理中解脱出来.从此密钥不需要两台主机事先约定好,但是这也产生另一个问题,无法获知通信双方的身份.这个问题依赖非对称加密算法.</p>
<blockquote>
<p>非对称加密算法</p>
</blockquote>
<p>这种算法会产生一对密钥,分别是公钥(Public Key)与私钥(Secret Key).而公钥是通过某种方式从私钥中提取出来的.通过公钥加密有明文,必须用相应的私钥才能解密.</p>
<p>公钥人尽皆知,私钥只有生成公钥私钥对的家伙才知道.</p>
<p>于是用A主机私钥加密的明文,只能用与之对应的公钥才能解密,如果接收方能解密, 说明这个数据的发送方一定是A.</p>
<p>另一方面,A用接收方B的公钥加密明文,B接收后可以用自己的私钥解密.其它人中间截取了也无法解密,因为不知道B的私钥.所以这种密钥对也可实现数据机密性.但是它们很少用来进行数据加密,因为密钥对太长,加密与解密都非常慢.</p>
<p>通过分析可见,这种密钥对通常在网络中进行身份认证.</p>
<p>同时也发现,鱼与熊掌不可兼得.用对方公钥加密,可以保证数据机密性;用息私钥加密,可以保证数据发送方的身份.但是不能同时保证数据机密性,同时还能保证数据发送方的身份.这需要另一种机制保全鱼与熊掌.</p>
<p><strong>常用算法</strong></p>
<ul>
<li>RSA: 既可以加密,也可以签名</li>
<li>DSA: 只可以签名</li>
<li>Elgamal: 商业加密算法</li>
</ul>
<blockquote>
<p>身份验证与完整性双保险</p>
</blockquote>
<p>A与C在互联网中通信,中间有个B总是时不时的截取A和C的通信数据,乱改一通后伪装成发送方.为防止B这样的Bitch,于是A与B决定这么做.</p>
<p>A与B各自生成自己的密钥对.</p>
<p>A首先将原数据提取出一段特征码,从而保证数据完整性.然后将这段特征码用自己的私钥加密后发送给C.</p>
<p>此时,C通过A的公钥解密,如果能解密,说明发送方的确是A,于是开始处理数据.</p>
<p>若中间有B还截取了数据,由于特征码是用A的私钥加密的,于是B可以解密,之后要将窜改后的数据伪装成A发送给C时,只能用自己的私钥加密这段明文和特征码.于是C在接收时,用A的公钥无法解密,于是丢弃掉.</p>
<blockquote>
<p>CA: Certification Authority</p>
</blockquote>
<p>所有主机将自己的公钥发送给第三方机构,由这个机构对公钥做公证,以告诉接收方,这个公钥是合法且有效的.发证机构的权威性在于自己也有公钥私钥对,机构用自己的私钥将数据特征码加密,加密后的数据即证书.这个受大众信任的第三方机构叫CA,由CA颁发的证书即CA证书.</p>
<p>CA也拥有一个证书（内含公钥和私钥）。网上的公众用户通过验证CA的签字从而信任CA，任何人都可以得到CA的证书（含公钥）,用以验证它所签发的证书。</p>
<p>如果用户想得到一份属于自己的证书，他应先向CA提出申请。在CA判明申请者的身份后，便为他分配一个公钥，并且CA将该公钥与申请者的身份信息绑在一起，并为之签字后，便形成证书发给申请者。</p>
<p>如果一个用户想鉴别另一个证书的真伪，他就用CA的公钥对那个证书上的签字进行验证，一旦验证通过，该证书就被认为是有效的。证书实际是由证书签证机关（CA）签发的对用户的公钥的认证。</p>
<p>证书的内容包括：电子签证机关的信息、公钥用户信息、公钥、权威机构的签字和有效期等等。目前，证书的格式和验证方法普遍遵循X.509 国际标准。</p>
<blockquote>
<p>数字签名和数字证书</p>
</blockquote>
<p><strong>数字签名</strong>是指: 将通过单向加密算法提取的特征码(摘要)用私钥加密后的内容.</p>
<p><img src="/assets/blogImg/数字签名过程.png" alt=""></p>
<p><strong>数字证书</strong>是指: 是用来证明A就是A,不是别人伪装而成.证明方式即: CA用自己的私钥将发送方A的公钥及相关信息加密生成<strong>数字证书</strong>,接收方B通过CA的公钥解密来验证A就是A.</p>
<p><img src="/assets/blogImg/数字证书认证过程.png" alt=""></p>
<p>对于B/S架构的WEB服务,https请求可以这么来看.</p>
<p>Server端需要在建站时就去CA申请一个合法的数字证书,这个证书由第三方机构CA用自己的私钥对Server的域名,公钥,证书有效期等加密后生成.</p>
<p>Client发出HTTPS请求,Server将自己的网页内容提取特征码,并用自己的私钥加密生成数字签名,然后Server用对称加密算法(或是其它加密方式)将网页内容加密生成密文,最后将密文与数字证书一起发给Client.</p>
<p>Client(一般是浏览器)在自己的受信任CA列表中找到相应的公钥,如果可以解密数字证书,则表示这个Server的确是我要访问的那个站点,不是骗子写的假网站.第二步,用对称密钥解密数据,得到网页内容与数字证书.自己根据网页内容计算特征码2.第三步,将第一步解密后拿到的Server的公钥解密数字证书得到原始特征码1.对比两个特征码,以验证数据完整性.</p>
<p>整个过程,数据机密性,服务者身份以及数据完整性一气呵成.</p>
<blockquote>
<p>CA证书的作用</p>
</blockquote>
<p><strong>1 验证网络是否可信</strong></p>
<p>通常，我们如果访问某些敏感的网页（比如用户登录的页面），其协议都会使用HTTPS而不是HTTP。因为HTTP协议是明文的，一旦有坏人在偷窥你的网络通讯，他/她就可以看到网络通讯的内容（比如你的密码、银行帐号、等）；而HTTPS是加密的协议，可以保证你的传输过程中，坏蛋无法偷窥。</p>
<p>但是，千万不要以为，HTTPS协议有了加密，就可高枕无忧了。俺再举一个例子来说明，光有加密是不够滴。假设有一个坏人，搞了一个假的网银的站点，然后诱骗你上这个站点。假设你又比较单纯，一不留神，就把你的帐号，口令都输入进去了。那这个坏蛋的阴谋就得逞鸟。</p>
<p>为了防止坏人这么干，HTTPS协议除了有加密的机制，还有一套证书的机制。<strong>通过证书来确保，某个站点确实就是某个站点</strong>。</p>
<p>有了证书之后，当你的浏览器在访问某个HTTPS网站时，会验证该站点上的CA证书（类似于验证介绍信的公章）。如果浏览器发现该证书没有问题（证书被某个根证书信任、证书上绑定的域名和该网站的域名一致、证书没有过期），那么页面就直接打开；否则的话，浏览器会给出一个警告，告诉你该网站的证书存在某某问题，是否继续访问该站点？</p>
<p><strong>2 验证文件是否可信</strong></p>
<p>目前大多数知名的公司（或组织机构），其发布的可执行文件（比如软件安装包、驱动程序、安全补丁），都带有数字签名。</p>
<blockquote>
<p>PKI</p>
</blockquote>
<p>PKI（Public Key Infrastructure）公钥基础设施是提供公钥加密和数字签名服务的系统或平台，目的是为了管理密钥和证书。一个机构通过采用PKI框架管理密钥和证书可以建立一个安全的网络环境。</p>
<p>PKI主要包括四个部分：X.509格式的证书（X.509 V3）和证书废止列表CRL（X.509 V2）；CA操作协议；CA管理协议；CA政策制定。一个典型、完整、有效的PKI应用系统至少应具有以下五个部分:</p>
<p>认证中心CA. CA是PKI的核心，CA负责管理PKI结构下的所有用户（包括各种应用程序）的证书，把用户的公钥和用户的其他信息捆绑在一起，在网上验证用户的身份，CA还要负责用户证书的黑名单登记和黑名单发布，后面有CA的详细描述。</p>
<p>X.500目录服务器. X.500目录服务器用于发布用户的证书和黑名单信息，用户可通过标准的LDAP协议查询自己或其他人的证书和下载黑名单信息。</p>
<p>具有高强度密码算法(SSL)的安全WWW服务器 Secure socket layer(SSL)协议最初由Netscape企业发展，现已成为网络用来鉴别网站和网页浏览者身份，以及在浏览器使用者及网页服务器之间进行加密通讯的全球化标准。  </p>
<p>Web安全通信平台. Web有Web Client端和Web Server端两部分，分别安装在客户端和服务器端，通过具有高强度密码算法的SSL协议保证客户端和服务器端数据的机密性、完整性、身份验证。  </p>
<p>自开发安全应用系统.自开发安全应用系统是指各行业自开发的各种具体应用系统，例如银行、证券的应用系统等。完整的PKI包括认证政策的制定（包括遵循的技术标准、各CA之间的上下级或同级关系、安全策略、安全程度、服务对象、管理原则和框架等）、认证规则、运作制度的制定、所涉及的各方法律关系内容以及技术的实现等。</p>
<h4 id="OpenSSL"><a href="#OpenSSL" class="headerlink" title="OpenSSL"></a>OpenSSL</h4><p>PKI的一种实现就是SSL/TLS,SSL的证书格式使用X509.</p>
<blockquote>
<p>SSL是什么</p>
</blockquote>
<p>Netscape为了能够让http协议能够加密数据后在网络中传输.在应用层与传输层之间加了一个库SSL—Secure Socket Layer.这让应用层所有的明文协议都可以通过调用SSL的库后将数据加密后通过tcp传输.</p>
<p>TLS与SSL的不同在于,TLS是国际标准化组织维护,是一个完全开放的Transport Layer Sercurity.</p>
<blockquote>
<p>SSL会话</p>
</blockquote>
<p>HTTP协议是基于TCP的,因此需要三次握手,之后要走SSL.<br><strong>Step0:</strong> TCP三次握手<br><strong>Step1:</strong> Client发起请求到Server.<br><strong>Step2:</strong>Server与Client双方约定彼此支持的加密算法与安全协议版本.<br><strong>Step3:</strong> Server将自己的CA证书发送给Client<br><strong>Step4:</strong> Client用CA公钥解密证书并验证证书的完整性.随机生成一个密钥,并用证书中携带的Server公钥加密后发送给Server,以约定对称加密解密使用的密钥.<br><strong>Step5:</strong> Server用Step4中接收的密钥加密http数据包后发送给Client.<br><strong>Step6:</strong> Client用密钥解密数据包.</p>
<blockquote>
<p>OpenSSL</p>
</blockquote>
<p><a href="www.openssl.org">OpenSSL</a>是Linux提供对称加密算法的工具.它由三部分组成.</p>
<ul>
<li>libcrypto: 加密算法库</li>
<li>libssl: ssl协议实现库,基于ssl会话实现身份认证,数据机密性与完整性.</li>
<li>openssl: 命令行工具,可以实现私有证书颁发机构.</li>
</ul>
<p>为什么要实现私有颁发机构?可以用来在公司内部建立证书颁发机构.</p>
<blockquote>
<p>OpenSSL实现私有CA</p>
</blockquote>
<ul>
<li>Step1: 生成一对密钥</li>
<li>Step2: 把公钥生成证书</li>
</ul>
<p><strong>常用命令</strong></p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">rpm -qa | grep openssl</div><div class="line">rpm -ql openssl</div><div class="line">openssl version</div><div class="line">openssl ?</div><div class="line">openssl speed [算法名称|DES3]</div><div class="line">whatis passwd</div><div class="line">man sslpasswd</div><div class="line"><span class="comment"># enc - symmetric cipher routines对称加密规则</span></div><div class="line">man enc [算法名称] [-in 从哪个文件读] [-out 输出到哪个文件]</div><div class="line"><span class="comment"># 对inittab进行base64编码后,用des对inittab加密</span></div><div class="line">openssl enc -des -salt <span class="_">-a</span> -in inittab -out inittab.des</div><div class="line">openssl enc -des <span class="_">-d</span> -salt <span class="_">-a</span>  -in inittab.des -out inittab</div><div class="line">openssl dgst -sha [filename] <span class="comment">#提取特征码(摘要,指纹等)</span></div><div class="line"><span class="comment"># 生成rsa 密钥对</span></div><div class="line">openssl genrsa [numbits] </div><div class="line"><span class="comment"># 用子shell生成文件权限为600,目录权限为700的文件,且文件中写的是长度为2048位的rsa私钥,文件名为server1024.key</span></div><div class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out server1024.key 2048)</div><div class="line"><span class="comment"># 从server1024.key文件中提取公钥</span></div><div class="line">openssl rsa -in server1024.key -pubout</div><div class="line">man req</div><div class="line"><span class="comment"># 生成证书</span></div><div class="line">openssl req -new -x509 -key server1024.key -out server.crt -days 365</div><div class="line"><span class="comment"># 查看证书内容</span></div><div class="line">openssl x509 -text -in server.crt</div></pre></td></tr></table></figure>
<p><strong>准备工作</strong><br><code>/etc/pki/tls/openssl.cnf</code><br>这是openssl的配置文件,建私有CA时用.在这里要进行一些配置. </p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /etc/pki/CA</div><div class="line">mkdir certs newcerts crl</div><div class="line">touch index.txt</div><div class="line">touch serial</div><div class="line"><span class="built_in">echo</span> 01 &gt; serial</div></pre></td></tr></table></figure>
<p><strong>Step1</strong> 生成一对密钥 </p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">cd</span> /etc/pki/CA</div><div class="line">(<span class="built_in">umask</span> 077; openssl genrsa -out private/cakey.pem 2048)</div><div class="line">```  </div><div class="line"></div><div class="line">**Step2** 生成证书 </div><div class="line"></div><div class="line">```ZSH</div><div class="line"><span class="built_in">cd</span> /etc/pki/CA</div><div class="line">openssl req -new -x509 -key private/cakey.pem -out cacert.pem</div></pre></td></tr></table></figure>
<p><strong>Step3</strong> 用httpd服务申请一个证书</p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># 生成密钥</span></div><div class="line">[root@os1 data]<span class="comment"># (umask 077; openssl genrsa -out httpdkey.pem 2048)</span></div><div class="line">Generating RSA private key, 2048 bit long modulus</div><div class="line">............................................+++</div><div class="line">...................................................+++</div><div class="line">e is 65537 (0x10001)</div><div class="line"><span class="comment"># 填写申请书,附上自己的公钥,组织机构,个人联系方式,公司域名等信息,最后生成csr文件</span></div><div class="line"><span class="comment"># csr: Certificate Signiture Request</span></div><div class="line">[root@os1 data]<span class="comment"># openssl req -new -key httpdkey.pem -out httpd.csr</span></div><div class="line">You are about to be asked to enter information that will be incorporated</div><div class="line">into your certificate request.</div><div class="line">What you are about to enter is what is called a Distinguished Name or a DN.</div><div class="line">There are quite a few fields but you can leave some blank</div><div class="line">For some fields there will be a default value,</div><div class="line">If you enter <span class="string">'.'</span>, the field will be left blank.</div><div class="line">-----</div><div class="line">Country Name (2 letter code) [CN]:</div><div class="line">State or Province Name (full name) [beijing]:</div><div class="line">Locality Name (eg, city) [beijing]:</div><div class="line">Organization Name (eg, company) [nora.inc]:</div><div class="line">Organizational Unit Name (eg, section) [tech]:</div><div class="line">Common Name (eg, your name or your server<span class="string">'s hostname) []:www.xpercent.nora.com</span></div><div class="line">Email Address []:admin@nora.com</div><div class="line"></div><div class="line">Please enter the following 'extra<span class="string">' attributes</span></div><div class="line">to be sent with your certificate request</div><div class="line">A challenge password []:</div><div class="line">An optional company name []:</div><div class="line"></div><div class="line"># 将csr请求文件发送给CA服务器(目前在一台主机上,正常是在不同主机上,要进行文件传输)</div><div class="line"></div><div class="line"># CA根据csr请求生成一个证书</div><div class="line">[root@os1 data]# openssl ca -in httpd.csr -out httpd.crt -days 365</div><div class="line">Using configuration from /etc/pki/tls/openssl.cnf</div><div class="line">Check that the request matches the signature</div><div class="line">Signature ok</div><div class="line">Certificate Details:</div><div class="line">        Serial Number: 1 (0x1)</div><div class="line">        Validity</div><div class="line">            Not Before: Jun 24 23:30:42 2017 GMT</div><div class="line">            Not After : Jun 24 23:30:42 2018 GMT</div><div class="line">        Subject:</div><div class="line">            countryName               = CN</div><div class="line">            stateOrProvinceName       = beijing</div><div class="line">            organizationName          = nora.inc</div><div class="line">            organizationalUnitName    = tech</div><div class="line">            commonName                = www.xpercent.nora.com</div><div class="line">            emailAddress              = admin@nora.com</div><div class="line">        X509v3 extensions:</div><div class="line">            X509v3 Basic Constraints:</div><div class="line">                CA:FALSE</div><div class="line">            Netscape Comment:</div><div class="line">                OpenSSL Generated Certificate</div><div class="line">            X509v3 Subject Key Identifier:</div><div class="line">                FE:DD:47:7C:99:51:54:E2:C1:A4:70:EF:A6:11:8D:D3:FC:34:AB:DF</div><div class="line">            X509v3 Authority Key Identifier:</div><div class="line">                keyid:38:38:72:C4:83:45:FE:1E:2E:76:F8:11:8B:7A:F0:22:22:5D:9B:97</div><div class="line"></div><div class="line">Certificate is to be certified until Jun 24 23:30:42 2018 GMT (365 days)</div><div class="line">Sign the certificate? [y/n]:y</div><div class="line">1 out of 1 certificate requests certified, commit? [y/n]y</div><div class="line">Write out database with 1 new entries</div><div class="line">Data Base Updated</div><div class="line"></div><div class="line"># 查看一下其它文件的变化 </div><div class="line">[root@os1 data]# cat /etc/pki/CA/index.txt</div><div class="line">V	180624233042Z		01	unknown	/C=CN/ST=beijing/O=nora.inc/OU=tech/CN=www.xpercent.nora.com/emailAddress=admin@nora.com</div><div class="line">[root@os1 data]# cat /etc/pki/CA/serial</div><div class="line">02</div></pre></td></tr></table></figure>
<p><strong>命令演示结果</strong></p>
<figure class="highlight zsh"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div><div class="line">191</div><div class="line">192</div><div class="line">193</div><div class="line">194</div><div class="line">195</div><div class="line">196</div><div class="line">197</div><div class="line">198</div><div class="line">199</div><div class="line">200</div><div class="line">201</div><div class="line">202</div><div class="line">203</div><div class="line">204</div><div class="line">205</div><div class="line">206</div><div class="line">207</div><div class="line">208</div><div class="line">209</div><div class="line">210</div><div class="line">211</div><div class="line">212</div><div class="line">213</div><div class="line">214</div><div class="line">215</div><div class="line">216</div><div class="line">217</div><div class="line">218</div><div class="line">219</div><div class="line">220</div><div class="line">221</div><div class="line">222</div><div class="line">223</div><div class="line">224</div><div class="line">225</div><div class="line">226</div><div class="line">227</div><div class="line">228</div><div class="line">229</div><div class="line">230</div><div class="line">231</div><div class="line">232</div><div class="line">233</div><div class="line">234</div><div class="line">235</div></pre></td><td class="code"><pre><div class="line">[root@os1 ~]<span class="comment"># openssl speed des</span></div><div class="line">Doing des cbc <span class="keyword">for</span> 3s on 16 size blocks: 12135926 des cbc<span class="string">'s in 3.00s</span></div><div class="line">Doing des cbc for 3s on 64 size blocks: 3111694 des cbc's <span class="keyword">in</span> 3.00s</div><div class="line">Doing des cbc <span class="keyword">for</span> 3s on 256 size blocks: 780776 des cbc<span class="string">'s in 2.99s</span></div><div class="line">Doing des cbc for 3s on 1024 size blocks: 195431 des cbc's <span class="keyword">in</span> 3.00s</div><div class="line">Doing des cbc <span class="keyword">for</span> 3s on 8192 size blocks: 24502 des cbc<span class="string">'s in 3.00s</span></div><div class="line">Doing des ede3 for 3s on 16 size blocks: 4568156 des ede3's <span class="keyword">in</span> 3.00s</div><div class="line">Doing des ede3 <span class="keyword">for</span> 3s on 64 size blocks: 1158206 des ede3<span class="string">'s in 3.00s</span></div><div class="line">Doing des ede3 for 3s on 256 size blocks: 290987 des ede3's <span class="keyword">in</span> 3.00s</div><div class="line">Doing des ede3 <span class="keyword">for</span> 3s on 1024 size blocks: 72260 des ede3<span class="string">'s in 3.00s</span></div><div class="line">Doing des ede3 for 3s on 8192 size blocks: 8958 des ede3's <span class="keyword">in</span> 3.00s</div><div class="line">OpenSSL 1.0.1e-fips 11 Feb 2013</div><div class="line">built on: Mon May  9 09:54:24 CDT 2016</div><div class="line">options:bn(64,64) md2(int) rc4(16x,int) des(idx,cisc,16,int) aes(partial) idea(int) blowfish(idx)</div><div class="line">compiler: gcc <span class="_">-f</span>PIC -DOPENSSL_PIC -DZLIB -DOPENSSL_THREADS -D_REENTRANT -DDSO_DLFCN -DHAVE_DLFCN_H -DKRB5_MIT -m64 -DL_ENDIAN -DTERMIO -Wall -O2 -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -Wa,--noexecstack -DPURIFY -DOPENSSL_IA32_SSE2 -DOPENSSL_BN_ASM_MONT -DOPENSSL_BN_ASM_MONT5 -DOPENSSL_BN_ASM_GF2m -DSHA1_ASM -DSHA256_ASM -DSHA512_ASM -DMD5_ASM -DAES_ASM -DVPAES_ASM -DBSAES_ASM -DWHIRLPOOL_ASM -DGHASH_ASM</div><div class="line">The <span class="string">'numbers'</span> are <span class="keyword">in</span> 1000s of bytes per second processed.</div><div class="line"><span class="built_in">type</span>             16 bytes     64 bytes    256 bytes   1024 bytes   8192 bytes</div><div class="line">des cbc          64724.94k    66382.81k    66849.05k    66707.11k    66906.79k</div><div class="line">des ede3         24363.50k    24708.39k    24830.89k    24664.75k    24461.31k</div><div class="line">=====================================================================</div><div class="line">[root@os1 ~]<span class="comment"># openssl enc -des -salt -a -in inittab -out inittab.des</span></div><div class="line">enter des-cbc encryption password:</div><div class="line">Verifying - enter des-cbc encryption password:</div><div class="line">[root@os1 ~]<span class="comment"># cat inittab.des</span></div><div class="line">U2FsdGVkX1//0nGfv2OsPDBRiiolKFBqCLXseR0Cgev6OAm51eVf8wY80Hm24aHF</div><div class="line">T3Oi4XfyUm46dhHB6MYXOTTsRPy4+DFP0V9C7KLHLdeaO5WsaOpfnL5CYYnddJpb</div><div class="line">Rax5edd/4d6CROXK8UizwaIZX9HwFPnc3XrUO+DZ9NUaN9Db+JP6Vmk1gWH1H2xk</div><div class="line">bocO+uAtc1dxc7eRxPbXTPd+XlrSeMwwDiuGoknP/8gzXHGLnRQnSheMVzmfwQ4R</div><div class="line">VygJtkA3hYnS1ZrnCN0WOiNbjrTWXUqMhqGULT7VGjWiFi/817iZYKETJNEVx4Jf</div><div class="line">71yM169hlSzsUfQzP04d9Z8H3HTp/8/yIgDeDSjrLnazto4dWn24grS9fODaES+s</div><div class="line">IlORzW9iBgFOuu/Wmw3wIF9F4JwjraTB4vyDN8HmQxIq3YDOYQ+/7uQvozgE4750</div><div class="line">W9vlNpVsSY6NzMr+xQv5f2di+idYCsfg8QmeOi4S+raCfsq06VSbetPD9QfEfCkl</div><div class="line">E3LHsjQ6amcr85wg1SxMOxC1eP7vu4kxot7zVmtOLKLx01vOVrB327CV6ySWExAj</div><div class="line">Vp7HN6Z3CWsffiZ0r4+hq9J5lpKvz3YmRbtlqMOxt1rNSweU9aIbM61t0VcgYSQb</div><div class="line">f+FtMiYZ2DnJRD7II3T5WS7adK4GM+ioP8qATqDu7ikzv1aQz2R3uLvh7OoURxv/</div><div class="line">N16mnf3p4hyhowtKQBoY2LkeUNx/QIJDzNjplBUwACskuNbmISOmdFsHOBN7D6m7</div><div class="line">nvQ5Efsek3kqK3IlsYldiFQbOOJroFvDa4fy1AMM9hOa1GC4ew0zIcixSUbPH0mf</div><div class="line">RLUSQg1FNB4qs4tiApbrrI1vo1eHgOrg4Xn0Ef4T1c59a0NGAsK841/tw/jQXCWU</div><div class="line">ZQsJCWz1zbBcL2Ieb4Ya+tXqel5dupF9LypwFl6vSFIMiQRGvZ/qpoqHIebwEA8p</div><div class="line">646zl/hG/7xqeN4WGKVehiqB2ERaJgiXOA35nrLLTDNJ7KsDOdUepclej1pbqWnm</div><div class="line">6XTntOS3risapkhGzbYb/CgDwy+o9BBw+VuYkV9HePEnWoqCa9GPrHfLx79pWEmt</div><div class="line">opPn/aP5BJoP46Mou06vTgCTgLMktFR11DY1cclNNPMG1wzMtI4RavzYZgjp/YXy</div><div class="line">Mtj1uIIy3mMi8KwmHK4A7Rf+jXZr3z8c/LGkxq+th64sjegMKUzIQA==</div><div class="line">=====================================================================</div><div class="line">[root@os1 ~]<span class="comment"># openssl enc -des -d -salt -a  -in inittab.des -out inittab</span></div><div class="line">enter des-cbc decryption password:</div><div class="line">[root@os1 ~]<span class="comment"># cat inittab</span></div><div class="line"><span class="comment"># inittab is only used by upstart for the default runlevel.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># ADDING OTHER CONFIGURATION HERE WILL HAVE NO EFFECT ON YOUR SYSTEM.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># System initialization is started by /etc/init/rcS.conf</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Individual runlevels are started by /etc/init/rc.conf</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Ctrl-Alt-Delete is handled by /etc/init/control-alt-delete.conf</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Terminal gettys are handled by /etc/init/tty.conf and /etc/init/serial.conf,</span></div><div class="line"><span class="comment"># with configuration in /etc/sysconfig/init.</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># For information on how to write upstart event handlers, or how</span></div><div class="line"><span class="comment"># upstart works, see init(5), init(8), and initctl(8).</span></div><div class="line"><span class="comment">#</span></div><div class="line"><span class="comment"># Default runlevel. The runlevels used are:</span></div><div class="line"><span class="comment">#   0 - halt (Do NOT set initdefault to this)</span></div><div class="line"><span class="comment">#   1 - Single user mode</span></div><div class="line"><span class="comment">#   2 - Multiuser, without NFS (The same as 3, if you do not have networking)</span></div><div class="line"><span class="comment">#   3 - Full multiuser mode</span></div><div class="line"><span class="comment">#   4 - unused</span></div><div class="line"><span class="comment">#   5 - X11</span></div><div class="line"><span class="comment">#   6 - reboot (Do NOT set initdefault to this)</span></div><div class="line"><span class="comment">#</span></div><div class="line">id:3:initdefault:</div><div class="line">=====================================================================</div><div class="line">[root@os1 ~]<span class="comment"># openssl genrsa 1024</span></div><div class="line">Generating RSA private key, 1024 bit long modulus</div><div class="line">.........................................++++++</div><div class="line">...................................................................................++++++</div><div class="line">e is 65537 (0x10001)</div><div class="line">-----BEGIN RSA PRIVATE KEY-----</div><div class="line">MIICXAIBAAKBgQDfm81Mc6/7m6X7EdgamGSGW8/1lMw9r+f28Bwvit9iqERFHr9p</div><div class="line">no9SyxzIC3swHfJtzHvH71oFS5sx0qDbHa83P+Sr3Q6xe6fzfmdTd+kgjL3cPnvQ</div><div class="line">8Zw/TCXhqYA3FgU/T7GcABL0FDGEtlhyWytw85yCmRlc1978I5nHQUiZnwIDAQAB</div><div class="line">AoGAYbtTC6s0q5/n98hgz57zsNXIGuoiKoQLup5Pc2gbIp+w1xUNTDiFJAaqWbTK</div><div class="line">7sjoAJ1zLHusuMvG1QveSma7AXV/QBcIVum4OuNXdVNYTamskVipgrDcHMOe9uE+</div><div class="line">Y54jrBlwCplFBw1wHA17t1kbAG0xqGNLLKkOz1cRK/HTi8ECQQD7i4SQcobmgbCy</div><div class="line">TAqoNiasD+FW7s55DtHdbTi9iFlvDyb+N9CdFixH0mceLrnZXq4VOOOXL5ryEio4</div><div class="line">KllVWs3HAkEA45G<span class="built_in">fg</span>N8bcTqrFN74NSQKsqaEa7CoSk2+Xv59zm2UilUh0VBKEfKE</div><div class="line">fw2zjEvakZR6cGfuwWPFE8c9VEh4uhA1aQJBAN0CFyYGygnK1uHAt/hVI6M3jKgh</div><div class="line">x51LbQ6cgSbdnp5adMsVZSAvtBYigeFd8oJOkqsowaY6+GtJlHimlLjOwE8CQHxE</div><div class="line">CdBqhGa5PbDA7NK/4qOZcFgJ+GvStjDTUUmG5wT+5d+Rs1DHmHh0t+XV<span class="keyword">if</span>3TEWUO</div><div class="line">K/8ohvZ85s1+YYZg0XkCQE5HJTzuDCfnofNclJCn95UZ1EECyAig6GV4s9tI1YVV</div><div class="line">GaUWCG23VQqRJ+4r9ac7n0nssp6AgolGWbyoFWhjROE=</div><div class="line">-----END RSA PRIVATE KEY-----</div><div class="line">=====================================================================</div><div class="line">[root@os1 ~]<span class="comment"># (umask 077; openssl genrsa -out server1024.key 2048)</span></div><div class="line">Generating RSA private key, 2048 bit long modulus</div><div class="line">...........+++</div><div class="line">..............+++</div><div class="line">e is 65537 (0x10001)</div><div class="line">=====================================================================</div><div class="line">[root@os1 ~]<span class="comment"># openssl rsa -in server1024.key -pubout</span></div><div class="line">writing RSA key</div><div class="line">-----BEGIN PUBLIC KEY-----</div><div class="line">MIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEA1JdhTaaEhnedzcysImCk</div><div class="line">f0xBFwV9Sqf25sswFqc5ztPltXLAYvWIlnQO4NOr9lhdkhWrpGKLGcirdctPw/LY</div><div class="line">cvWu97d/vUQbblZ+wfnbHK1prv2eypoitajlKywdSl4kKbmwF/FSlA0KkO7wHcck</div><div class="line">fBLHlBvGd03BHfxeHeEQRRvlzBt5F739T0tEQhus5fTPBzdm+bZ9ngVMtC9ELHMc</div><div class="line">V9Hlo8BQjjVUFX+igqRTglOwzC79xZxz8DRjIHG82ZY9feuqDbzoYUNb+Q1fzf56</div><div class="line">sMDEv7vLGZVOuR/q08RMqeW/VT1p+3xpMy9WjuPJ9x2bVCDnv40fe4NCcTsX1yx5</div><div class="line">RwIDAQAB</div><div class="line">-----END PUBLIC KEY-----</div><div class="line">=====================================================================</div><div class="line">[root@os1 CA]<span class="comment"># (umask 077; openssl genrsa -out private/cakey.pem 2048)</span></div><div class="line">Generating RSA private key, 2048 bit long modulus</div><div class="line">.........+++</div><div class="line">........+++</div><div class="line">e is 65537 (0x10001)</div><div class="line">[root@os1 CA]<span class="comment"># ll</span></div><div class="line">total 20</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 certs</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 crl</div><div class="line">-rw-r--r--. 1 root root    0 Jun 25 07:16 index.txt</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 newcerts</div><div class="line">drwx------. 2 root root 4096 Jun 25 07:18 private</div><div class="line">-rw-r--r--. 1 root root    3 Jun 25 07:16 serial</div><div class="line">[root@os1 CA]<span class="comment"># ll private/</span></div><div class="line">total 4</div><div class="line">-rw-------. 1 root root 1675 Jun 25 07:18 cakey.pem</div><div class="line">[root@os1 CA]<span class="comment"># openssl req -new -x509 -key private/cakey.pem -out cacert.pem</span></div><div class="line">You are about to be asked to enter information that will be incorporated</div><div class="line">into your certificate request.</div><div class="line">What you are about to enter is what is called a Distinguished Name or a DN.</div><div class="line">There are quite a few fields but you can leave some blank</div><div class="line">For some fields there will be a default value,</div><div class="line">If you enter <span class="string">'.'</span>, the field will be left blank.</div><div class="line">-----</div><div class="line">Country Name (2 letter code) [CN]:</div><div class="line">State or Province Name (full name) [beijing]:</div><div class="line">Locality Name (eg, city) [beijing]:</div><div class="line">Organization Name (eg, company) [nora.inc]:</div><div class="line">Organizational Unit Name (eg, section) [tech]:</div><div class="line">Common Name (eg, your name or your server<span class="string">'s hostname) []:nora.tech</span></div><div class="line">Email Address []:adminnora@nora.com</div><div class="line">[root@os1 CA]# ll</div><div class="line">total 24</div><div class="line">-rw-r--r--. 1 root root 1415 Jun 25 07:20 cacert.pem</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 certs</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 crl</div><div class="line">-rw-r--r--. 1 root root    0 Jun 25 07:16 index.txt</div><div class="line">drwxr-xr-x. 2 root root 4096 May  9  2016 newcerts</div><div class="line">drwx------. 2 root root 4096 Jun 25 07:18 private</div><div class="line">-rw-r--r--. 1 root root    3 Jun 25 07:16 serial</div><div class="line">=====================================================================</div><div class="line">[root@os1 CA]# openssl x509 -text -in cacert.pem</div><div class="line">Certificate:</div><div class="line">    Data:</div><div class="line">        Version: 3 (0x2)</div><div class="line">        Serial Number: 16501759579344852429 (0xe50206e847bfd5cd)</div><div class="line">    Signature Algorithm: sha1WithRSAEncryption</div><div class="line">        Issuer: C=CN, ST=beijing, L=beijing, O=nora.inc, OU=tech, CN=nora.tech/emailAddress=adminnora@nora.com</div><div class="line">        Validity</div><div class="line">            Not Before: Jun 24 23:20:21 2017 GMT</div><div class="line">            Not After : Jul 24 23:20:21 2017 GMT</div><div class="line">        Subject: C=CN, ST=beijing, L=beijing, O=nora.inc, OU=tech, CN=nora.tech/emailAddress=adminnora@nora.com</div><div class="line">        Subject Public Key Info:</div><div class="line">            Public Key Algorithm: rsaEncryption</div><div class="line">                Public-Key: (2048 bit)</div><div class="line">                Modulus:</div><div class="line">                    00:f1:6b:fa:67:e6:36:da:af:97:d1:74:c2:e9:c8:</div><div class="line">                    3f:9d:bd:a2:0d:6e:43:56:47:a7:1d:80:18:df:b9:</div><div class="line">                    5a:0b:d9:1a:26:c7:13:19:02:40:08:44:43:c4:29:</div><div class="line">                    27:05:9d:98:27:95:b0:b3:27:86:93:5f:c5:3e:b2:</div><div class="line">                    b8:16:57:71:c7:c8:34:f1:b5:13:2f:00:fe:d6:40:</div><div class="line">                    3d:4c:11:e2:75:b6:4b:e7:b4:9b:08:3c:b0:85:65:</div><div class="line">                    27:97:da:a9:c6:30:e7:fe:c0:02:9e:21:b4:76:70:</div><div class="line">                    3b:f1:f6:5e:07:6d:7c:be:87:ec:0b:d6:dd:1e:58:</div><div class="line">                    5d:02:36:3a:e1:c1:44:f7:53:b0:b9:bd:7d:6e:e3:</div><div class="line">                    23:d2:1d:3a:dd:7c:f4:de:d7:dd:ba:92:cd:78:a5:</div><div class="line">                    b0:62:15:8d:e0:55:2f:13:04:b3:4d:90:3b:ed:44:</div><div class="line">                    a5:44:a1:c8:d4:63:70:24:e0:ef:52:b3:87:6a:21:</div><div class="line">                    de:25:db:92:6a:0b:a4:87:ef:b7:54:41:b6:66:fb:</div><div class="line">                    d4:5b:b4:9d:c7:80:bd:e3:da:4e:0b:83:70:a2:9e:</div><div class="line">                    bd:5a:09:7c:7e:3f:bc:67:9c:2e:d0:6a:cb:f8:67:</div><div class="line">                    f1:de:cd:7f:cb:45:19:8a:a3:bb:b9:2c:e2:93:f1:</div><div class="line">                    19:dd:f4:eb:59:db:17:fa:9a:36:ad:12:1e:8a:60:</div><div class="line">                    2a:a9</div><div class="line">                Exponent: 65537 (0x10001)</div><div class="line">        X509v3 extensions:</div><div class="line">            X509v3 Subject Key Identifier:</div><div class="line">                38:38:72:C4:83:45:FE:1E:2E:76:F8:11:8B:7A:F0:22:22:5D:9B:97</div><div class="line">            X509v3 Authority Key Identifier:</div><div class="line">                keyid:38:38:72:C4:83:45:FE:1E:2E:76:F8:11:8B:7A:F0:22:22:5D:9B:97</div><div class="line"></div><div class="line">            X509v3 Basic Constraints:</div><div class="line">                CA:TRUE</div><div class="line">    Signature Algorithm: sha1WithRSAEncryption</div><div class="line">         41:39:41:75:d0:5e:58:c9:4f:48:b3:d4:01:0a:19:ed:d7:34:</div><div class="line">         d8:d4:68:db:e2:aa:22:02:7d:3d:4e:50:ad:74:36:af:74:ac:</div><div class="line">         41:a9:f4:b6:52:ba:23:68:75:3b:a3:af:a4:d0:b1:30:3e:2e:</div><div class="line">         4e:c9:fd:5f:3f:84:b5:9c:ae:f5:a7:fa:99:e6:6d:d0:5e:9c:</div><div class="line">         5e:98:db:6a:54:63:36:ad:99:55:12:07:9b:b7:97:45:14:b3:</div><div class="line">         86:cb:6f:49:b6:cb:aa:36:e3:ac:d2:00:53:04:37:10:51:df:</div><div class="line">         eb:50:d4:a9:e9:03:bb:46:1c:89:00:d8:6a:da:ad:7b:98:51:</div><div class="line">         81:fe:99:3e:6b:5d:e4:21:7a:8e:71:dc:cb:80:66:ff:52:d4:</div><div class="line">         6c:b6:84:9f:8a:a8:58:90:85:de:00:66:eb:ea:ea:bb:bc:1f:</div><div class="line">         e3:a2:87:47:72:bf:2e:16:63:7c:96:cf:79:d2:ef:21:35:e3:</div><div class="line">         c1:18:2e:b8:b0:09:6d:7e:fc:ac:b2:df:1a:3d:01:de:73:9b:</div><div class="line">         cd:dc:e6:4f:50:53:3c:f7:11:ab:9a:c1:07:13:f1:cd:6e:d2:</div><div class="line">         af:7b:03:0d:90:dd:ca:cd:be:dc:60:05:4f:6c:d8:8b:6b:36:</div><div class="line">         9d:ed:39:09:c3:1b:5a:3d:9b:56:89:d9:ef:fb:12:c3:8b:57:</div><div class="line">         95:a4:5a:93</div><div class="line">-----BEGIN CERTIFICATE-----</div><div class="line">MIID6TCCAtGgAwIBAgIJAOUCBuhHv9XNMA0GCSqGSIb3DQEBBQUAMIGKMQswCQYD</div><div class="line">VQQGEwJDTjEQMA4GA1UECAwHYmVpamluZzEQMA4GA1UEBwwHYmVpamluZzERMA8G</div><div class="line">A1UECgwIbm9yYS5pbmMxDTALBgNVBAsMBHRlY2gxEjAQBgNVBAMMCW5vcmEudGVj</div><div class="line">aDEhMB8GCSqGSIb3DQEJARYSYWRtaW5ub3JhQG5vcmEuY29tMB4XDTE3MDYyNDIz</div><div class="line">MjAyMVoXDTE3MDcyNDIzMjAyMVowgYoxCzAJBgNVBAYTAkNOMRAwDgYDVQQIDAdi</div><div class="line">ZWlqaW5nMRAwDgYDVQQHDAdiZWlqaW5nMREwDwYDVQQKDAhub3JhLmluYzENMAsG</div><div class="line">A1UECwwEdGVjaDESMBAGA1UEAwwJbm9yYS50ZWNoMSEwHwYJKoZIhvcNAQkBFhJh</div><div class="line">ZG1pbm5vcmFAbm9yYS5jb20wggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIB</div><div class="line">AQDxa/pn5jbar5fRdMLpyD+dvaINbkNWR6cdgBjfuVoL2RomxxMZAkAIREPEKScF</div><div class="line">nZgnlbCzJ4aTX8U+srgWV3HHyDTxtRMvAP7WQD1MEeJ1tkvntJsIPLCFZSeX2qnG</div><div class="line">MOf+wAKeIbR2cDvx9l4HbXy+h+wL1t0eWF0CNjrhwUT3U7C5vX1u4yPSHTrdfPTe</div><div class="line">1926ks14pbBiFY3gVS8TBLNNkDvtRKVEocjUY3Ak4O9Ss4dqId4l25JqC6SH77dU</div><div class="line">QbZm+9RbtJ3HgL3j2k4Lg3Cinr1aCXx+P7xnnC7Qasv4Z/HezX/LRRmKo7u5LOKT</div><div class="line">8Rnd9OtZ2xf6mjatEh6KYCqpAgMBAAGjUDBOMB0GA1UdDgQWBBQ4OHLEg0X+Hi52</div><div class="line">+BGLevAiIl2blzAfBgNVHSMEGDAWgBQ4OHLEg0X+Hi52+BGLevAiIl2blzAMBgNV</div><div class="line">HRMEBTADAQH/MA0GCSqGSIb3DQEBBQUAA4IBAQBBOUF10F5YyU9Is9QBChnt1zTY</div><div class="line">1Gjb4qoiAn09TlCtdDavdKxBqfS2UrojaHU7o6+k0LEwPi5Oyf1fP4S1nK71p/qZ</div><div class="line">5m3QXpxemNtqVGM2rZlVEgebt5dFFLOGy29JtsuqNuOs0gBTBDcQUd/rUNSp6QO7</div><div class="line">RhyJANhq2q17mFGB/pk+a13kIXqOcdzLgGb/UtRstoSfiqhYkIXeAGbr6uq7vB/j</div><div class="line">oodHcr8uFmN8ls950u8hNePBGC64sAltfvysst8aPQHec5vN3OZPUFM89xGrmsEH</div><div class="line">E/HNbtKvewMNkN3Kzb7cYAVPbNiLazad7TkJwxtaPZtWidnv+xLDi1eVpFqT</div><div class="line">-----END CERTIFICATE-----</div></pre></td></tr></table></figure>
      
    </div>

    <div>
      
        

      
    </div>

    <div>
      
        

      
    </div>


    <footer class="post-footer">
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/DNS详解/2017/06/24/" rel="next" title="DNS详解">
                <i class="fa fa-chevron-left"></i> DNS详解
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/生如蚁而美如神/2017/06/28/" rel="prev" title="生如蚁而美如神">
                生如蚁而美如神 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </article>



    <div class="post-spread">
      
        <!-- JiaThis Button BEGIN -->
<div class="jiathis_style">
  <a class="jiathis_button_tsina"></a>
  <a class="jiathis_button_tqq"></a>
  <a class="jiathis_button_weixin"></a>
  <a class="jiathis_button_cqq"></a>
  <a class="jiathis_button_douban"></a>
  <a class="jiathis_button_renren"></a>
  <a class="jiathis_button_qzone"></a>
  <a class="jiathis_button_kaixin001"></a>
  <a class="jiathis_button_copy"></a>
  <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank"></a>
  <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" >
  var jiathis_config={
    hideMore:false
  }
</script>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<!-- JiaThis Button END -->

      
    </div>
  </div>


          </div>
          


          
  <div class="comments" id="comments">
    
      <div class="ds-thread" data-thread-key="网络安全/2017/06/24/"
           data-title="网络安全" data-url="http://xpercent.tech/网络安全/2017/06/24/">
      </div>
    
  </div>


        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap" >
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" itemprop="image"
               src="/assets/blogImg/avatar.png"
               alt="Xpercent" />
          <p class="site-author-name" itemprop="name">Xpercent</p>
          <p class="site-description motion-element" itemprop="description">数据为王</p>
        </div>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">28</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          
            <div class="site-state-item site-state-categories">
              <a href="/categories">
                <span class="site-state-item-count">20</span>
                <span class="site-state-item-name">分类</span>
              </a>
            </div>
          

          
            <div class="site-state-item site-state-tags">
              <a href="/tags">
                <span class="site-state-item-count">35</span>
                <span class="site-state-item-name">标签</span>
              </a>
            </div>
          

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        
        

        


      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#网络安全"><span class="nav-number">1.</span> <span class="nav-text">网络安全</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#网络通信安全问题"><span class="nav-number">1.1.</span> <span class="nav-text">网络通信安全问题</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#加密"><span class="nav-number">1.2.</span> <span class="nav-text">加密</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#OpenSSL"><span class="nav-number">1.3.</span> <span class="nav-text">OpenSSL</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy;  2014 - 
  <span itemprop="copyrightYear">2017</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Xpercent</span>
</div>


<div class="powered-by">
  由 <a class="theme-link" href="https://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT.Muse
  </a>
</div>


        

<div class="busuanzi-count">

  <script async src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="site-uv">本站访客数<span class="busuanzi-value" id="busuanzi_value_site_uv"></span>人次</span>
  

  
    <span class="site-pv">本站总访问量<span class="busuanzi-value" id="busuanzi_value_site_pv"></span>次</span>
  
  
</div>



        
      </div>
    </footer>

    <div class="back-to-top">
      <i class="fa fa-arrow-up"></i>
    </div>
  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  



  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery/2.1.3/jquery.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fastclick/1.0.6/fastclick.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/jquery.lazyload/1.9.3/jquery.lazyload.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/velocity/1.2.3/velocity.ui.min.js"></script>

  
  <script type="text/javascript" src="//cdn.jsdelivr.net/fancybox/2.1.5/jquery.fancybox.pack.js"></script>


  


  <script type="text/javascript" src="/js/src/utils.js?v=5.1.0"></script>

  <script type="text/javascript" src="/js/src/motion.js?v=5.1.0"></script>



  
  

  
  <script type="text/javascript" src="/js/src/scrollspy.js?v=5.1.0"></script>
<script type="text/javascript" src="/js/src/post-details.js?v=5.1.0"></script>



  


  <script type="text/javascript" src="/js/src/bootstrap.js?v=5.1.0"></script>



  

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"xpercent"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>

  
    
    
    <script src="//cdn.jsdelivr.net/ua-parser.js/0.7.10/ua-parser.min.js"></script>
    <script src="/js/src/hook-duoshuo.js"></script>
  








  
  

  

  

  
<script>
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';        
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>


  


</body>
</html>
